{"ast":null,"code":"import _slicedToArray from\"C:/Users/Shubham Gupta/Desktop/Project full/Server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import M from'materialize-css';import{useHistory}from'react-router-dom';var CreatePost=function CreatePost(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),url=_useState8[0],setUrl=_useState8[1];useEffect(function(){if(url){fetch(\"/createpost\",{method:\"post\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({title:title,body:body,pic:url})}).then(function(res){return res.json();}).then(function(data){if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{M.toast({html:\"Created post Successfully\",classes:\"#43a047 green darken-1\"});history.push('/');}}).catch(function(err){console.log(err);});}},[url]);//adding photos of post into the cloudinary website   \nvar postDetails=function postDetails(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"instadada\");data.append(\"cloud_name\",\"imambergupta\");fetch(\"https://api.cloudinary.com/v1_1/imambergupta/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card input-filed\",style:{margin:\"30px auto\",maxWidth:\"500px\",padding:\"20px\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"body\",value:body,onChange:function onChange(e){return setBody(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn waves-effect waves-light #424242 grey darken-3\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Uplaod Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return postDetails();},children:\"Submit post\"})]});};export default CreatePost;","map":{"version":3,"sources":["C:/Users/Shubham Gupta/Desktop/Project full/Server/client/src/components/screens/CreatePost.js"],"names":["React","useState","useEffect","M","useHistory","CreatePost","history","title","setTitle","body","setBody","image","setImage","url","setUrl","fetch","method","headers","localStorage","getItem","JSON","stringify","pic","then","res","json","data","error","toast","html","classes","push","catch","err","console","log","postDetails","FormData","append","margin","maxWidth","padding","textAlign","e","target","value","files"],"mappings":"wQAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,CACA,MAAOC,CAAAA,CAAP,KAAc,iBAAd,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAI,CACnB,GAAMC,CAAAA,OAAO,CAAGF,UAAU,EAA1B,CADmB,cAEMH,QAAQ,CAAC,EAAD,CAFd,wCAEZM,KAFY,eAENC,QAFM,8BAGIP,QAAQ,CAAC,EAAD,CAHZ,yCAGZQ,IAHY,eAGPC,OAHO,8BAIMT,QAAQ,CAAC,EAAD,CAJd,yCAIZU,KAJY,eAINC,QAJM,8BAKEX,QAAQ,CAAC,EAAD,CALV,yCAKZY,GALY,eAKRC,MALQ,eAMnBZ,SAAS,CAAC,UAAI,CACX,GAAGW,GAAH,CAAO,CACNE,KAAK,CAAC,aAAD,CAAe,CAChBC,MAAM,CAAC,MADS,CAEhBC,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJ,gBAAgB,UAAWC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFvB,CAFQ,CAMhBV,IAAI,CAACW,IAAI,CAACC,SAAL,CAAe,CAChBd,KAAK,CAALA,KADgB,CAEhBE,IAAI,CAAJA,IAFgB,CAGhBa,GAAG,CAACT,GAHY,CAAf,CANW,CAAf,CAAL,CAWGU,IAXH,CAWQ,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAXX,EAYCF,IAZD,CAYM,SAAAG,IAAI,CAAE,CAET,GAAGA,IAAI,CAACC,KAAR,CAAc,CACXxB,CAAC,CAACyB,KAAF,CAAQ,CAACC,IAAI,CAAEH,IAAI,CAACC,KAAZ,CAAkBG,OAAO,CAAC,sBAA1B,CAAR,EACF,CAFD,IAGI,CACA3B,CAAC,CAACyB,KAAF,CAAQ,CAACC,IAAI,CAAC,2BAAN,CAAkCC,OAAO,CAAC,wBAA1C,CAAR,EACAxB,OAAO,CAACyB,IAAR,CAAa,GAAb,EACH,CACH,CArBD,EAqBGC,KArBH,CAqBS,SAAAC,GAAG,CAAE,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAvBD,EAwBH,CACA,CA3BQ,CA2BP,CAACpB,GAAD,CA3BO,CAAT,CA6BH;AACE,GAAMuB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAI,CACpB,GAAMV,CAAAA,IAAI,CAAG,GAAIW,CAAAA,QAAJ,EAAb,CACAX,IAAI,CAACY,MAAL,CAAY,MAAZ,CAAmB3B,KAAnB,EACAe,IAAI,CAACY,MAAL,CAAY,eAAZ,CAA4B,WAA5B,EACAZ,IAAI,CAACY,MAAL,CAAY,YAAZ,CAAyB,cAAzB,EACAvB,KAAK,CAAC,2DAAD,CAA6D,CAC9DC,MAAM,CAAC,MADuD,CAE9DP,IAAI,CAACiB,IAFyD,CAA7D,CAAL,CAICH,IAJD,CAIM,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EAJT,EAKCF,IALD,CAKM,SAAAG,IAAI,CAAE,CACTZ,MAAM,CAACY,IAAI,CAACb,GAAN,CAAN,CACF,CAPD,EAQCmB,KARD,CAQO,SAAAC,GAAG,CAAE,CACRC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAVD,EAaH,CAlBD,CAqBA,mBACI,aAAK,SAAS,CAAC,kBAAf,CACA,KAAK,CAAE,CACHM,MAAM,CAAC,WADJ,CAEHC,QAAQ,CAAC,OAFN,CAGHC,OAAO,CAAC,MAHL,CAIHC,SAAS,CAAC,QAJP,CADP,wBAQI,cACA,IAAI,CAAC,MADL,CAEC,WAAW,CAAC,OAFb,CAGC,KAAK,CAAEnC,KAHR,CAIC,QAAQ,CAAE,kBAACoC,CAAD,QAAKnC,CAAAA,QAAQ,CAACmC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb,EAJX,EARJ,cAcI,cACC,IAAI,CAAC,MADN,CAEE,WAAW,CAAC,MAFd,CAGE,KAAK,CAAEpC,IAHT,CAIC,QAAQ,CAAE,kBAACkC,CAAD,QAAKjC,CAAAA,OAAO,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ,EAJX,EAdJ,cAoBI,aAAK,SAAS,CAAC,wBAAf,wBACC,aAAK,SAAS,CAAC,oDAAf,wBACI,sCADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAE,kBAACF,CAAD,QAAK/B,CAAAA,QAAQ,CAAC+B,CAAC,CAACC,MAAF,CAASE,KAAT,CAAe,CAAf,CAAD,CAAb,EAA7B,EAFJ,GADD,cAKC,YAAK,SAAS,CAAC,mBAAf,uBACI,cAAO,SAAS,CAAC,oBAAjB,CAAsC,IAAI,CAAC,MAA3C,EADJ,EALD,GApBJ,cA6BK,eAAQ,SAAS,CAAC,oDAAlB,CACA,OAAO,CAAE,yBAAIV,CAAAA,WAAW,EAAf,EADT,yBA7BL,GADJ,CAuCF,CAhGD,CAmGA,cAAe/B,CAAAA,UAAf","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport M from 'materialize-css'\r\nimport {useHistory} from 'react-router-dom'\r\nconst CreatePost = ()=>{\r\n    const history = useHistory()\r\n    const [title,setTitle] = useState(\"\")\r\n    const [body,setBody] = useState(\"\")\r\n    const [image,setImage] = useState(\"\")\r\n    const [url,setUrl] = useState(\"\")\r\n    useEffect(()=>{\r\n       if(url){\r\n        fetch(\"/createpost\",{\r\n            method:\"post\",\r\n            headers:{\r\n                \"Content-Type\":\"application/json\",\r\n                \"Authorization\":\"Bearer \"+ localStorage.getItem(\"jwt\")\r\n            },\r\n            body:JSON.stringify({\r\n                title,\r\n                body,\r\n                pic:url\r\n            })\r\n        }).then(res=>res.json())\r\n        .then(data=>{\r\n    \r\n           if(data.error){\r\n              M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\r\n           }\r\n           else{\r\n               M.toast({html:\"Created post Successfully\",classes:\"#43a047 green darken-1\"})\r\n               history.push('/')\r\n           }\r\n        }).catch(err=>{\r\n            console.log(err)\r\n        })\r\n    }\r\n    },[url])\r\n  \r\n //adding photos of post into the cloudinary website   \r\n   const postDetails = ()=>{\r\n       const data = new FormData()\r\n       data.append(\"file\",image)\r\n       data.append(\"upload_preset\",\"instadada\")\r\n       data.append(\"cloud_name\",\"imambergupta\")\r\n       fetch(\"https://api.cloudinary.com/v1_1/imambergupta/image/upload\",{\r\n           method:\"post\",\r\n           body:data\r\n       })\r\n       .then(res=>res.json())\r\n       .then(data=>{\r\n          setUrl(data.url)\r\n       })\r\n       .catch(err=>{\r\n           console.log(err)\r\n       })\r\n\r\n    \r\n   }\r\n \r\n\r\n   return(\r\n       <div className=\"card input-filed\"\r\n       style={{\r\n           margin:\"30px auto\",\r\n           maxWidth:\"500px\",\r\n           padding:\"20px\",\r\n           textAlign:\"center\"\r\n       }}\r\n       >\r\n           <input \r\n           type=\"text\"\r\n            placeholder=\"title\"\r\n            value={title}\r\n            onChange={(e)=>setTitle(e.target.value)}\r\n            />\r\n           <input\r\n            type=\"text\"\r\n             placeholder=\"body\"\r\n             value={body}\r\n            onChange={(e)=>setBody(e.target.value)}\r\n             />\r\n           <div className=\"file-field input-field\">\r\n            <div className=\"btn waves-effect waves-light #424242 grey darken-3\">\r\n                <span>Uplaod Image</span>\r\n                <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])} />\r\n            </div>\r\n            <div className=\"file-path-wrapper\">\r\n                <input className=\"file-path validate\" type=\"text\" />\r\n            </div>\r\n            </div>\r\n            <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\r\n            onClick={()=>postDetails()}\r\n            \r\n            >\r\n                Submit post\r\n            </button>\r\n\r\n       </div>\r\n   )\r\n}\r\n\r\n\r\nexport default CreatePost"]},"metadata":{},"sourceType":"module"}